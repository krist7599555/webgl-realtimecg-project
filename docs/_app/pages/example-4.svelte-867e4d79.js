import{S as t,i as a,s as e,D as n,e as r,k as o,c as s,a as i,d as c,n as l,H as u,f as m,aZ as _,F as d,v as h,r as p,z as E,a_ as f,aU as g,aV as A,a$ as v,b0 as x,N as F,b1 as w,b2 as T,aW as C,b3 as R,aX as B,aY as L}from"../chunks/vendor-f7f38553.js";const{window:U}=f;function $(t){let a,e,E,f,g;const A=t[3].default,v=n(A,t,t[2],null);return{c(){a=r("canvas"),e=o(),v&&v.c(),this.h()},l(t){a=s(t,"CANVAS",{style:!0}),i(a).forEach(c),e=l(t),v&&v.l(t),this.h()},h(){u(a,"width","100%"),u(a,"height","100%")},m(n,r){m(n,a,r),t[5](a),m(n,e,r),v&&v.m(n,r),E=!0,f||(g=_(U,"resize",t[4]),f=!0)},p(t,[a]){v&&v.p&&(!E||4&a)&&d(v,A,t,t[2],a,null,null)},i(t){E||(h(v,t),E=!0)},o(t){p(v,t),E=!1},d(n){n&&c(a),t[5](null),n&&c(e),v&&v.d(n),f=!1,g()}}}function y(t,a,e){let n,{$$slots:r={},$$scope:o}=a,s=!0;E((()=>{const t=n.getContext("webgl");var a=g(t,["\t\n\t\tattribute vec4 a_position;\n\t\tattribute vec2 a_texcoord;\n\t\tuniform mat4 u_matrix;\n\t\tvarying vec2 v_texcoord;\n\t\tvoid main() {\n\t\t\tgl_Position = u_matrix * a_position;\n\t\t\tv_texcoord = a_texcoord;\n\t\t}\n\t","\n\t\tprecision mediump float;\n\t\tvarying vec2 v_texcoord;\n\t\tuniform sampler2D u_texture;\n\t\tvoid main() {\n\t\t\tgl_FragColor = texture2D(u_texture, v_texcoord);\n\t\t}\n\t"]);const r=A(t,{a_position:{numComponents:3,data:new Float32Array([-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5])},a_texcoord:{numComponents:2,data:new Float32Array([0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,1,0,0,1,1,1,0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,1,0,0,1,1,1,0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,1,0,0,1,1,1])}}),o=v(t,{width:3,height:3,format:t.LUMINANCE,internalFormat:t.LUMINANCE,minMag:t.NEAREST,wrap:t.CLAMP_TO_EDGE,src:new Uint8Array([128,64,128,0,192,0,50,90,110])}),i=v(t,{width:800,height:800,format:t.RGBA,internalFormat:t.RGBA,minMag:t.LINEAR,wrap:t.CLAMP_TO_EDGE,src:null}),c=x(t,[{attachmentPoint:t.COLOR_ATTACHMENT0,target:t.TEXTURE_2D,level:0,attachment:i}],800,800);function l({aspect:e,texture:n,rotateX:o=0,rotateY:s=0}){C(a,{u_texture:n,u_matrix:(new R).identity().multiplyRight((new R).perspective({fovy:w(60),aspect:e,near:1,far:2e3})).multiplyRight((new R).lookAt([0,0,2],[0,0,0],[0,1,0])).rotateX(o).rotateY(s)}),B(t,a,r),L(t,r,t.TRIANGLES)}t.useProgram(a.program),t.enable(t.CULL_FACE),t.enable(t.DEPTH_TEST),window.addEventListener("resize",(()=>e(1,s=!0))),requestAnimationFrame((function a(r){const u=w(-.07*r),m=w(-.08*r);s&&(e(0,n.width=n.clientWidth,n),e(0,n.height=n.clientHeight,n),e(1,s=!1)),T(t,c,t.FRAMEBUFFER),t.clearColor(0,0,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),l({aspect:1,texture:o,rotateX:u,rotateY:m}),T(t,null),t.clearColor(1,0,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),l({aspect:t.drawingBufferWidth/t.drawingBufferHeight,texture:i,rotateX:u,rotateY:m}),requestAnimationFrame(a)}))}));return t.$$set=t=>{"$$scope"in t&&e(2,o=t.$$scope)},[n,s,o,r,()=>e(1,s=!0),function(t){F[t?"unshift":"push"]((()=>{n=t,e(0,n)}))}]}export default class extends t{constructor(t){super(),a(this,t,y,$,e,{})}}
